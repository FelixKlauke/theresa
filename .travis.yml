######################################
### Configure programming language ###
######################################
language: java

##################################
### Make sure using Oracle JDK ###
##################################
jdk:
- oraclejdk11

###################################
### Disable Email notifications ###
###################################
notifications:
  email: false

###########################
### Actual Build Script ###
###########################
script:
- ./gradlew build check
- ./gradlew codeCoverageReport
- ./gradlew sonarqube -Dsonar.host.url=$SONAR_URL -Dsonar.projectKey=$SONAR_PROJECT_KEY -Dsonar.login=$SONAR_TOKEN

###################################
### Upload Code Coverage Report ###
###################################
after_success:
- bash <(curl -s https://codecov.io/bash)

##################
### Deployment ###
##################
deploy:
  provider: script
  script: ./gradlew publish
  on:
    branch: master
    tags: true

###################
### Environment ###
###################
env:
  global:
    - SONAR_URL=https://sonar.klauke-enterprises.com
    - SONAR_PROJECT_KEY=theresa
    - secure: UTfMIZg/7bCY5REKA9PI1bCTfIYuD7L94lkX/rHJFIPwxTwgkfmznJAZLaN9EnEN8WCWRYgbqg2xCas5C5rZj7E1sZvxi+6rIakUnSm9kAGX2xx3jd7hRgob2A6oQTL3hcicyOmmd30pBFbr3eRjpFgeaVy99HrEHAi0Mk26OomcB1u9Aor3WDYZN9z1e37PjtJJ4Wg4LFFxZTK6JISi7ynn9cjg23FbV908CC1lG9u0qqUvm9Jp7q7Zvc7xUT+DCBN0wCr3GG3QlMbhciwYONouwqhxo5rxiJ2KGZfaRiQuLiyJ0hP2eOY9GBxYArnNvPzj4FnHZZUO93DMXeAR2j/+wZO4V4sCFdO4oWNaTZyBLtxFMOk1UyBnWccgWEbtLQ1MEBGss69Zgqd0k6jgqxsVG6sV0l0cp/aXkEt+H1hYh8X5LVeZI3ChvZ5Javk3aoE9D8IJdJmHE09lxfUyXzYenjGXgl1n7kKKFAKcXPTIkSCZVNgzwEj1HuDkSs/jXBHnoeM8eE8/E/gakuNVPtMm2qMTIcii2cJI2Ty4wIiGSxUESL6pWS8FnaOkAVSZ+moiwBfXAPKBFRh9jtVH27uRLJL0awoDbdYSv6BjOBdOsUw7GitLCqk9/S3sC1arf7B7eTJeXNEcOXRNYyWUvbN2CWD44pjl4+EKrDKRVWM=
    - secure: jOItQDKs8sDhR2Am3sxRDooG2zD7nUdVR8oanCeoAxSTvpCSiNy3AW/XFI3OG8ftLHdJk/+iPydetW9nHMNuKwXDuqFejA5g6RS6AqMn+PoISnZDfxkvSSLMwslgj1eJNC45vhS9rXfbkTVqFvLH3lKnlYTBPvGj8JJCI/tPOLiOQuUORA5cXQ6gGFYrT3px1L4zKomH5D9e8Z1tmPf3yzNUGEZibcyCEmPj6gm1rC5PQErqbCFR89BnnosHqStdDfkqv6eFyWV58rG/uwn9bM2i8fSmwnb5ig6v+ork1wWydBFPTPtXME+872AmxWV6aZtLtG1NRJpNXv0yxBBMQyZQfEEqdJyzFqjFMyYA3/E4mEhdTh+aLOHUBT8mwCzboxeuFRJ1FBC8sgL1zLiekNJL7PwuHFgoJutwXDzMQ1xLFxAGTrHndz5OP3cC+01NoOGmy2tC/vsp1F7pLTXs5tceOtZkC2+wwgSfGR8XOLDbjMSwznNlpR/Fza5n0amBFJqsqyU8HGJPNoVjt7ohfWHxd3YtxShKDTcfSUy30t0bUWED/6cXaOBCwsgZVzDndFqz8tvO8VKabU+cgmHMB9N1zp/sHxtzjFZsh6y8bPf2qKXpkJAHiYeprgJx2YhHtP2gbwC32xb35NMRYNIMfKA25ELBDlwHEcj8y7Qp5x4=
    - secure: su+hO6w9+AtOKrAX557rjP6HpTm/XuPlTF/TbDkqajKQV2eLEoFbmJOM55z1bKCq1FLQkxxOvRkhE/BHgc+eeQcJtpSsF5il2oFMTuc59B3ZQbLO60HwEZUIQj9dtv6X3AtlBhreqXl5FetiY8b/YcjffI35JqEbru21GvFRnBf0NepLhmPL52RqJLmNhtT2uTVrTaxt/sgdL/MsMXuFfCNRZG8ynt3bWz85l7QhjKSWZXrYOy9vkm35bABqx3LbpVdIMU7PDAhx0MrTDkv/OokApEmviGkTS6LoOB3rC1o2noLzHmoTa3VFMdGGe8CJa1yXiMH2vChihlIn+eEgSzb/k5+TdQbUR14uJxj2h7FRdfuaFBkQQO8EC/m7SzOzKVcmIjr5pNE4IAuFW660MANbANDxhaIFI8Ckn+5lAdVHTcHdKWMk3bD+1re+RI4MITQ5FtxULeYrDKVzkN86AW9I7RrM0X+pg1x7SC9Vj5FphQGVYVvk9WAFUxNRdU1e51knBrky4MIFKB9SCF/XvK7hAk2tTPYyuiJ2686n5OUBW1qo1lKSroGQsBmpW9YfPMcy5eoOmYOix8VBPf0h6724ZU3z9i5Eraq2oNP1d2CceYxRI+N56YKL0w+6jIfKyWgsBmmYwQESto1YnbuR60eXGN5Mb2FNG2Wwt8kDjyQ=
